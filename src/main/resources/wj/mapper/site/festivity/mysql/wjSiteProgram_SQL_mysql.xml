<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WjSiteProgramDAO">



    <select id="getSelectSiteWJProgramList"   parameterType="wj.com.site.festivity.vo.WjSiteProgramInfoVO"  resultType="wj.com.site.festivity.vo.WjSiteProgramInfoVO">

        SELECT A.PROGRAM_NM
              ,A.FESTIVITY_ID
              ,A.PROGRAM_SNO
              ,A.LANG_CODE
              ,@ROWNUM:=@ROWNUM+1 AS PROGRAM_CNT
      FROM (
            SELECT B.PROGRAM_NM
                  ,B.FESTIVITY_ID
                  ,B.PROGRAM_SNO
                  ,B.LANG_CODE
                FROM WJ_PROGRAM_INFO A
                    ,WJ_PROGRAM_INFO_LANG B
                WHERE 1=1
                AND A.PROGRAM_SNO =B.PROGRAM_SNO
                AND B.LANG_CODE =#{langCode}
                AND A.DELETE_YN ='N'
                AND A.FESTIVITY_ID =#{festivityId}
                ORDER BY A.ORDER_CNT ASC
          ) A      , (SELECT @ROWNUM:=0) R

    </select>


    <select id="getSelectSiteWJProgramInfo"   parameterType="wj.com.site.festivity.vo.WjSiteProgramInfoVO"  resultType="wj.com.site.festivity.vo.WjSiteProgramInfoVO">

       SELECT  B.PROGRAM_NM
              ,B.PROGRAM_PLACE
              ,B.PROGRAM_ETC
              ,B.CONTENT_INFO
              ,A.FESTIVITY_ID
              ,A.PROGRAM_SNO
              ,A.ATCH_FILE_ID
              ,A.PROGRAM_DAY
              ,A.PROGRAM_STR_TIME
              ,A.PROGRAM_END_TIME
              ,B.LANG_CODE
              ,A.PAGE_TYPE
              ,C.FESTIVITY_YEAR
        FROM WJ_PROGRAM_INFO A
            ,WJ_PROGRAM_INFO_LANG B
            ,WJ_FESTIVITY_INFO C
        WHERE 1=1
        AND A.PROGRAM_SNO =B.PROGRAM_SNO
        and A.FESTIVITY_ID =C.FESTIVITY_ID
        AND B.LANG_CODE =#{langCode}
        AND A.PROGRAM_SNO =#{programSno}
        AND A.DELETE_YN ='N'
        ORDER BY A.ORDER_CNT ASC
    </select>



    <select id="getSelectSiteWJProgramSubList"   parameterType="wj.com.site.festivity.vo.WjSiteProgramInfoVO"  resultType="wj.com.site.festivity.vo.WjSiteProgramSubInfoVO">

        SELECT   A.PROGRAM_SUB_SNO
                ,A.FESTIVITY_ID
                ,A.PROGRAM_SNO
                ,A.LEADER_YN
                ,A.ATCH_FILE_ID
                ,B.LANG_CODE
                ,B.CONT_TITLE
                ,B.MAIN_TITLE
                ,B.MAIN_NAME
                ,B.MAIN_INFO
                ,B.MAIN_ETC
        FROM WJ_PROGRAM_SUB A
           ,WJ_PROGRAM_SUB_LANG B
        WHERE 1=1
        AND A.PROGRAM_SUB_SNO =B.PROGRAM_SUB_SNO
        AND A.DELETE_YN ='N'
        AND A.USE_YN='Y'
        AND B.LANG_CODE =#{langCode}
        AND A.PROGRAM_SNO =#{programSno}
        ORDER BY A.ORDER_CNT ASC


    </select>



</mapper>