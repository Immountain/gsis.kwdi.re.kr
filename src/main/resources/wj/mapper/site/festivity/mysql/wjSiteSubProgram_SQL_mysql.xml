<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WjSiteSubProgramDAO">



        <select id="getSelectSiteWjSubProgramInfo"  parameterType="wj.com.site.festivity.vo.WjSiteSubProgramVO"  resultType="wj.com.site.festivity.vo.WjSiteSubProgramVO">


                SELECT A.FESTIVITY_ID
                      ,A.FESTIVITY_PROGRAM_SNO
                      ,A.TITLE
                      ,A.PAGE_TYPE
                      ,A.ATCH_FILE_ID
                      ,A.ORDER_CNT
                      ,B.SUB_PROGRAM_TITLE
                      ,B.CONTENT_INFO
                      ,B.LANG_CODE
                FROM WJ_SUB_PROGRAM A
                    ,WJ_SUB_PROGRAM_LANG B
                where 1=1
                and A.FESTIVITY_PROGRAM_SNO =B.FESTIVITY_PROGRAM_SNO
                and B.LANG_CODE =#{langCode}
                and B.FESTIVITY_PROGRAM_SNO=#{festivityProgramSno}
                and A.USE_YN ='Y'
                and A.DELETE_YN='N'


        </select>



    <select id="getSelectSiteWjSubProgramList"  parameterType="wj.com.site.festivity.vo.WjSiteSubProgramVO"  resultType="wj.com.site.festivity.vo.WjSiteSubProgramVO">

                SELECT       A.FESTIVITY_ID
                            ,A.FESTIVITY_PROGRAM_SNO
                            ,A.TITLE
                            ,A.PAGE_TYPE
                            ,A.ATCH_FILE_ID
                            ,A.ORDER_CNT
                            ,A.SUB_PROGRAM_TITLE
                            ,A.CONTENT_INFO
                            ,@ROWNUM:=@ROWNUM+1 AS SUB_PROGRAM_CNT
                FROM (

                        SELECT A.FESTIVITY_ID
                              ,A.FESTIVITY_PROGRAM_SNO
                              ,A.TITLE
                              ,A.PAGE_TYPE
                              ,A.ATCH_FILE_ID
                              ,A.ORDER_CNT
                              ,B.SUB_PROGRAM_TITLE
                              ,B.CONTENT_INFO
                        FROM WJ_SUB_PROGRAM A
                            ,WJ_SUB_PROGRAM_LANG B
                        where 1=1
                        and A.FESTIVITY_PROGRAM_SNO =B.FESTIVITY_PROGRAM_SNO
                        and B.LANG_CODE =#{langCode}
                        and A.FESTIVITY_ID =#{festivityId}
                        and a.USE_YN ='Y'
                        and a.DELETE_YN='N'
                        order by A.ORDER_CNT asc

                )A  , (SELECT @ROWNUM:=0) R

        </select>





</mapper>