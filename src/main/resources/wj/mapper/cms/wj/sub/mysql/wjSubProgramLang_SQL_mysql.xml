<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WjSubProgramLangDAO">

    <select id="selectSubProgramLang"
            parameterType="wj.com.cms.wj.sub.vo.WjSubProgramLangVO"
            resultType="wj.com.cms.wj.sub.vo.WjSubProgramLangVO">
        SELECT
             SPL.FESTIVITY_ID
            ,SPL.FESTIVITY_PROGRAM_SNO
            ,SPL.LANG_CODE
            ,SPL.SUB_PROGRAM_TITLE
            ,SPL.CONTENT_INFO
            ,SPL.PAGE_ID
            ,SPL.REG_DT
            ,SPL.REG_ID
            ,SPL.MOD_DT
            ,SPL.MOD_ID
        FROM WJ_SUB_PROGRAM_LANG SPL
        WHERE 1=1
          AND SPL.LANG_CODE= #{langCode}
          AND SPL.FESTIVITY_PROGRAM_SNO = #{festivityProgramSno}
    </select>

    <select id="selectSubProgramLangTotalCount"
            parameterType="wj.com.cms.wj.sub.vo.WjSubProgramLangVO"
            resultType="int">
        SELECT COUNT(*) totcnt
        FROM WJ_SUB_PROGRAM_LANG SPL
        WHERE 1=1
    </select>

    <select id="selectSubProgramLangList"
            parameterType="wj.com.cms.wj.sub.vo.WjSubProgramLangVO"
            resultType="wj.com.cms.wj.sub.vo.WjSubProgramLangVO">
        SELECT
             SPL.FESTIVITY_ID
            ,SPL.FESTIVITY_PROGRAM_SNO
            ,SPL.LANG_CODE
            ,SPL.SUB_PROGRAM_TITLE
            ,SPL.CONTENT_INFO
            ,SPL.PAGE_ID
            ,SPL.REG_DT
            ,SPL.REG_ID
            ,SPL.MOD_DT
            ,SPL.MOD_ID
        FROM WJ_SUB_PROGRAM_LANG SPL
        WHERE 1=1
        LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
    </select>

    <insert id="insertSubProgramLang">
		<![CDATA[
        INSERT INTO  WJ_SUB_PROGRAM_LANG (
             FESTIVITY_ID
            ,FESTIVITY_PROGRAM_SNO
            ,LANG_CODE
            ,SUB_PROGRAM_TITLE
            ,PAGE_ID
            ,REG_DT
            ,REG_ID
        ) VALUES (
             #{festivityId}
            ,#{festivityProgramSno}
            ,#{langCode}
            ,#{subProgramTitle}
            ,#{pageId}
            ,NOW()
            ,#{regId}
                 )
        ]]>
	</insert>

    <update id="updateSubProgramLang">
        UPDATE WJ_SUB_PROGRAM_LANG SET
             FESTIVITY_ID = #{festivityId}
            ,FESTIVITY_PROGRAM_SNO = #{festivityProgramSno}
            ,LANG_CODE = #{langCode}
            ,SUB_PROGRAM_TITLE = #{subProgramTitle}
            ,PAGE_ID = #{pageId}
            ,MOD_DT = NOW()
            ,MOD_ID = #{modId}
        WHERE  1=1
          AND FESTIVITY_PROGRAM_SNO = #{festivityProgramSno}
          AND LANG_CODE = #{langCode}
    </update>

    <update id="updateSubProgramContentLang">
        UPDATE WJ_SUB_PROGRAM_LANG SET
            CONTENT_INFO = #{contentInfo}
        WHERE 1=1
        AND FESTIVITY_PROGRAM_SNO = #{festivityProgramSno}
        AND LANG_CODE = #{langCode}
    </update>
</mapper>