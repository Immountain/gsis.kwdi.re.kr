<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WjEventUserDAO">

    <select id="selectEventUser"
            parameterType="wj.com.cms.wj.event.vo.WjEventUserVO"
            resultType="wj.com.cms.wj.event.vo.WjEventUserVO">
        SELECT
             EU.EVENT_USER_SNO
            ,EU.EVENT_ID
            ,EU.USER_NM
            ,EU.MEMO
            ,EU.ATCH_FILE_ID
            ,EU.USER_EMAIL
            ,EU.USER_PHONE
            ,EU.DELETE_YN
            ,EU.REG_IP
            ,EU.REG_ID
            ,EU.REG_DT
        FROM WJ_EVENT_USER EU
        WHERE 1=1
          AND EU.EVENT_USER_SNO =#{eventUserSno}
    </select>

    <select id="selectEventUserTotalCount"
        parameterType="wj.com.cms.wj.event.vo.WjEventUserVO"
        resultType="int">
        SELECT COUNT(*) totcnt
        FROM WJ_EVENT_USER EU
        WHERE 1=1
        AND EU.EVENT_ID = #{eventId}
        AND EU.DELETE_YN = 'N'

    </select>
    <select id="selectEventUserList"
        parameterType="wj.com.cms.wj.event.vo.WjEventUserVO"
        resultType="wj.com.cms.wj.event.vo.WjEventUserVO">
        SELECT
             EU.EVENT_USER_SNO
            ,EU.EVENT_ID
            ,EU.USER_NM
            ,EU.MEMO
            ,EU.ATCH_FILE_ID
            ,EU.USER_EMAIL
            ,EU.USER_PHONE
            ,EU.DELETE_YN
            ,EU.REG_IP
            ,EU.REG_ID
            ,EU.REG_DT
        FROM WJ_EVENT_USER EU
        WHERE 1=1
        AND EU.EVENT_ID = ${eventId}
        AND EU.DELETE_YN = 'N'
    </select>

    <insert id="insertEventUser">
        <![CDATA[
            INSERT INTO WJ_EVENT_USER(
                 EVENT_USER_SNO
                ,EVENT_ID
                ,USER_NM
                ,MEMO
                ,ATCH_FILE_ID
                ,USER_EMAIL
                ,USER_PHONE
                ,DELETE_YN
                ,REG_IP
                ,REG_ID
                ,REG_DT
            ) VALUES (
                 #{eventUserSno}
                ,#{eventId}
                ,#{userNm}
                ,#{memo}
                ,#{atchFileId}
                ,#{userEmail}
                ,#{userPhone}
                ,'N'
                ,#{regIp}
                ,#{regId}
                ,NOW()
                     )
        ]]>
    </insert>
    <update id="updateEventUser">
        UPDATE WJ_EVENT_USER SET
             EVENT_USER_SNO = #{eventUserSno}
            ,EVENT_ID = #{eventId}
            ,USER_NM = #{userNm}
            ,MEMO = #{memo}
            ,ATCH_FILE_ID = #{atchFileId}
            ,USER_EMAIL = #{userEmail}
            ,USER_PHONE = #{userPhone}
        WHERE 1=1
        AND EVENT_USER_SNO = #{eventUserSno}
    </update>

    <update id="deleteEventUser">
        UPDATE EVENT_USER_SNO SET
            DELETE_YN = #{Y}
        WHERE 1=1
        AND EVENT_USER_SNO = #{eventUserSno}
    </update>
</mapper>