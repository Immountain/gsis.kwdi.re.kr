<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WjProgramInfoLangDAO">

    <select id="selectProgramInfoLang"
            parameterType="wj.com.cms.wj.program.vo.WjProgramInfoLangVO"
            resultType="wj.com.cms.wj.program.vo.WjProgramInfoLangVO">
        SELECT
             PIL.LANG_CODE
            ,PIL.FESTIVITY_ID
            ,PIL.PROGRAM_SNO
            ,PIL.PROGRAM_NM
            ,PIL.PROGRAM_PLACE
            ,PIL.PROGRAM_ETC
            ,PIL.CONTENT_INFO
            ,PIL.REG_ID
            ,PIL.REG_DT
            ,PIL.MOD_ID
            ,PIL.MOD_DT
            ,PIL.PAGE_ID
        FROM WJ_PROGRAM_INFO_LANG PIL
        WHERE 1=1
          AND PIL.PROGRAM_SNO =#{programSno}
          AND PIL.LANG_CODE =#{langCode}
    </select>

    <select id="selectProgramInfoLangTotalCount"
            parameterType="wj.com.cms.wj.program.vo.WjProgramInfoLangVO"
            resultType="int">
        SELECT COUNT(*) totcnt
        FROM WJ_PROGRAM_INFO_LANG PIL
        WHERE 1=1
        <if test="searchCondition == 1">AND
            PI.PROGRAM_NM LIKE CONCAT('%' , #{searchKeyword}, '%')
        </if>
        <if test="searchCondition == 2">AND
            PI.LANG_CODE LIKE CONCAT('%' , #{searchKeyword}, '%')
        </if>

    </select>
    <select id="selectProgramInfoLangList"
            parameterType="wj.com.cms.wj.program.vo.WjProgramInfoLangVO"
            resultType="wj.com.cms.wj.program.vo.WjProgramInfoLangVO">
        SELECT
            ,PIL.LANG_CODE
            ,PIL.FESTIVITY_ID
            ,PIL.PROGRAM_SNO
            ,PIL.PROGRAM_NM
            ,PIL.PROGRAM_PLACE
            ,PIL.PROGRAM_ETC
            ,PIL.CONTENT_INFO
            ,PIL.REG_ID
            ,PIL.REG_DT
            ,PIL.MOD_ID
            ,PIL.MOD_DT
            ,PIL.PAGE_ID
        FROM WJ_PROGRAM_INFO_LANG PIL
        WHERE 1=1
        <if test="searchCondition == 1">AND
            PIL.PROGRAM_NM LIKE CONCAT('%' , #{searchKeyword}, '%')
        </if>
        <if test="searchCondition == 2">AND
            PIL.LANG_CODE LIKE CONCAT('%' , #{searchKeyword}, '%')
        </if>

        LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
    </select>

    <insert id="insertProgramInfoLang">
		<![CDATA[
        INSERT INTO  WJ_PROGRAM_INFO_LANG (
             LANG_CODE
            ,FESTIVITY_ID
            ,PROGRAM_SNO
            ,PROGRAM_NM
            ,PROGRAM_PLACE
            ,PROGRAM_ETC
            ,REG_ID
            ,REG_DT
            ,PAGE_ID
        ) VALUES (

             #{langCode}
            ,#{festivityId}
            ,#{programSno}
            ,#{programNm}
            ,#{programPlace}
            ,#{programEtc}
            ,#{regId}
            ,NOW()
            ,#{pageId}
                 )
        ]]>
	</insert>

    <update id="updateProgramInfoLang">
        UPDATE WJ_PROGRAM_INFO_LANG SET
             LANG_CODE = #{langCode}
            ,FESTIVITY_ID = #{festivityId}
            ,PROGRAM_NM = #{programNm}
            ,PROGRAM_PLACE = #{programPlace}
            ,PROGRAM_ETC = #{programEtc}
            ,MOD_ID = #{modId}
            ,MOD_DT = NOW()
            ,PAGE_ID = #{pageId}
        WHERE  1=1
          AND PROGRAM_SNO = #{programSno}
          AND LANG_CODE = #{langCode}
    </update>

    <update id="updateProgramInfoContentLang">
        UPDATE WJ_PROGRAM_INFO_LANG SET
            CONTENT_INFO = #{contentInfo}
        WHERE 1=1
        AND PROGRAM_SNO = #{programSno}
        AND LANG_CODE = #{langCode}
    </update>
</mapper>