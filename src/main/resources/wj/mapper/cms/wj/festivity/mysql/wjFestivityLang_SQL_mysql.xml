<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WjFestivityLangDAO">

    <select id="selectFestivityLang"
            parameterType="wj.com.cms.wj.festivity.vo.WjFestivityLangVO"
            resultType="wj.com.cms.wj.festivity.vo.WjFestivityLangVO">
        SELECT
             FL.FESTIVITY_ID
            ,FL.LANG_CODE
            ,FL.FESTIVITY_PLACE
            ,FL.FESTIVITY_SCALE
            ,FL.FESTIVITY_SUBJECT
            ,FL.FESTIVITY_HOST
            ,FL.FESTIVITY_SUPERVISES
            ,FL.FESTIVITY_SITUATION
            ,FL.TEMP1
            ,FL.TEMP2
            ,FL.TEMP3
            ,FL.TEMP4
            ,FL.TEMP5
            ,FL.REG_ID
            ,FL.REG_DT
            ,FL.MOD_ID
            ,FL.MOD_DT
        FROM WJ_FESTIVITY_LANG FL
        WHERE 1=1
          AND FL.FESTIVITY_ID =#{festivityId}
          AND FL.LANG_CODE =#{langCode}
    </select>
    <select id="selectFestivityLangTotalCount"
        parameterType="wj.com.cms.wj.festivity.vo.WjFestivityLangVO"
        resultType="int">
        SELECT COUNT(*) totcnt
        FROM WJ_FESTIVITY_LANG FL
        WHERE 1=1
        <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(festivityId)">
            AND FL.FESTIVITY_ID = #{festivityId}
        </if>

        <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(langCode)">
            AND FL.LANG_CODE = #{langCode}
        </if>
    </select>
    <select id="selectFestivityLangList"
        parameterType="wj.com.cms.wj.festivity.vo.WjFestivityLangVO"
        resultType="wj.com.cms.wj.festivity.vo.WjFestivityLangVO">
        SELECT
             FL.FESTIVITY_ID
            ,FL.LANG_CODE
            ,FL.FESTIVITY_PLACE
            ,FL.FESTIVITY_SCALE
            ,FL.FESTIVITY_SUBJECT
            ,FL.FESTIVITY_HOST
            ,FL.FESTIVITY_SUPERVISES
            ,FL.FESTIVITY_SITUATION
            ,FL.TEMP1
            ,FL.TEMP2
            ,FL.TEMP3
            ,FL.TEMP4
            ,FL.TEMP5
            ,FL.REG_ID
            ,FL.REG_DT
            ,FL.MOD_ID
            ,FL.MOD_DT
        FROM WJ_FESTIVITY_LANG FL
        WHERE 1=1
        <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(festivityId)">
            AND FL.FESTIVITY_ID = #{festivityId}
        </if>

        <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(langCode)">
            AND FL.LANG_CODE = #{langCode}
        </if>

        LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
    </select>

    <insert id="insertFestivityLang">
            INSERT INTO WJ_FESTIVITY_LANG(
                 FESTIVITY_ID
                ,LANG_CODE
                ,FESTIVITY_PLACE
                ,FESTIVITY_SCALE
                ,FESTIVITY_SUBJECT
                ,FESTIVITY_HOST
                ,FESTIVITY_SUPERVISES
                ,FESTIVITY_SITUATION
                ,TEMP1
                ,TEMP2
                ,TEMP3
                ,TEMP4
                ,TEMP5
                ,REG_ID
                ,REG_DT
            ) VALUES (
                 #{festivityId}
                ,#{langCode}
                ,#{festivityPlace}
                ,#{festivityScale}
                ,#{festivitySubject}
                ,#{festivityHost}
                ,#{festivitySupervises}
                ,#{festivitySituation}
                ,#{temp1}
                ,#{temp2}
                ,#{temp3}
                ,#{temp4}
                ,#{temp5}
                ,#{regId}
                ,NOW()
            )
    </insert>
    <update id="updateFestivityLang">
        UPDATE WJ_FESTIVITY_LANG SET
             FESTIVITY_ID = #{festivityId}
            ,LANG_CODE = #{langCode}
            ,FESTIVITY_PLACE = #{festivityPlace}
            ,FESTIVITY_SCALE = #{festivityScale}
            ,FESTIVITY_SUBJECT = #{festivitySubject}
            ,FESTIVITY_HOST = #{festivityHost}
            ,FESTIVITY_SUPERVISES = #{festivitySupervises}
            ,FESTIVITY_SITUATION = #{festivitySituation}
            ,TEMP1 = #{temp1}
            ,TEMP2 = #{temp2}
            ,TEMP3 = #{temp3}
            ,TEMP4 = #{temp4}
            ,TEMP5 = #{temp5}
            ,MOD_ID = #{modId}
            ,MOD_DT = NOW()
        WHERE 1=1
        AND FESTIVITY_ID = #{festivityId}
        AND LANG_CODE =#{langCode}
    </update>
</mapper>